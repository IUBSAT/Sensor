Base code, still with async function
